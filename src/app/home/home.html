<div class="films-container" appScrollEnd (scrolledToEnd)="onLoadMore()">

  <div class="films-header">
    <h1>Latest films</h1>
    <p>Click and explore - enjoy the show!</p>
  </div>

  <div class="films-grid">
    @for (film of films; track film.id) {
      <div class="film-card" [routerLink]="['/film', film.id]">
        <div class="film-poster">
          @if (film.poster_path) {
            <img 
              [src]="'https://image.tmdb.org/t/p/w500' + film.poster_path"
              [alt]="film.title"
              loading="lazy"
              class="poster-image"
            />
          } @else { 
            <div class="poster-placeholder">No image available</div>
          }
        </div>

        <div class="film-overlay">
          <div class="film-info">
            <h3 class="film-title">{{ film.title }}</h3>
            @if (film.release_date) {
              <p class="film-year">{{ film.release_date | date:'yyyy' }}</p>
            }
          </div>
        </div>

        <div class="film-details">
          <h3 class="film-title-mobile">{{ film.title }}</h3>
          @if (film.release_date) {
            <p class="film-year-mobile">{{ film.release_date | date:'yyyy' }}</p>
          }
        </div>
      </div>
    }
  </div>

  @if (loading) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading more films...</p>
    </div>
  }

  @if (!loading && films.length === 0) {
    <div class="no-more-container">
      <p>No more films to load.</p>
    </div>
  }

  @if (!loading && films.length > 0) {
    <div class="load-more-container">
      <button
        class="load-more-btn"
        (click)="onLoadMore()"
        [disabled]="loading"
      >
        <span class="btn-text">Load More Films</span>
        <svg
          class="btn-icon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M12 5v14M5 12l7 7 7-7" />
        </svg>
      </button>
    </div>
  }

</div>
